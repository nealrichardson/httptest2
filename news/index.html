<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • httptest2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-104182925-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104182925-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">httptest2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/httptest2.html">Get Started</a>
</li>
<li>
  <a href="../reference/">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/httptest2.html">Overview</a>
    </li>
    <li>
      <a href="../articles/redacting.html">Redacting Sensitive Information</a>
    </li>
    <li>
      <a href="../articles/vignettes.html">Using with Vignettes</a>
    </li>
    <li>
      <a href="../articles/faq.html">FAQ</a>
    </li>
  </ul></li>
<li>
  <a href="../news/">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nealrichardson/httptest2" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://enpiar.com" class="external-link">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/nealrichardson/httptest2/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.0.9000" id="httptest2-1109000">httptest2 1.1.0.9000<a class="anchor" aria-label="anchor" href="#httptest2-1109000"></a></h2>
<ul><li>
<code><a href="../reference/build_mock_url.html">build_mock_url()</a></code> now works with multipart body request containing character strings or raw data (<a href="https://github.com/nealrichardson/httptest2/issues/40" class="external-link">#40</a>, <a href="https://github.com/jmaspons" class="external-link">@jmaspons</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.0" id="httptest2-110">httptest2 1.1.0<small>2024-04-26</small><a class="anchor" aria-label="anchor" href="#httptest2-110"></a></h2>
<ul><li>
<code>request</code> is now removed when saving <code>httr2_response</code> objects. In earlier versions of <code>httr2</code>, requests were not included in responses, but in httr2 1.0.0, <a href="https://github.com/r-lib/httr2/pull/359" class="external-link">they were added</a> in order to improve error messages. <em>If you recorded any responses with httr2 &gt;= 1.0 and httptest2 prior to this version, you may have leaked auth secrets: this would happen if your requests included auth information (as in an <code>Authentication</code> header), and the response was saved in a .R file, not simplified to .json or other response-body-only formats. Please inspect your recorded responses and invalidate any tokens that were exposed.</em>
</li>
<li>
<code><a href="../reference/save_response.html">save_response()</a></code> now works with <code>simplify = TRUE</code> when the response body is empty (<a href="https://github.com/nealrichardson/httptest2/issues/37" class="external-link">#37</a>, <a href="https://github.com/jmaspons" class="external-link">@jmaspons</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.0" id="httptest2-100">httptest2 1.0.0<small>2023-11-07</small><a class="anchor" aria-label="anchor" href="#httptest2-100"></a></h2>
<ul><li>
<code><a href="../reference/capture_requests.html">capture_requests()</a></code> can be used without loading <code><a href="https://enpiar.com/httptest2/">library(httptest2)</a></code> (<a href="https://github.com/nealrichardson/httptest2/issues/22" class="external-link">#22</a>, <a href="https://github.com/kforner" class="external-link">@kforner</a>)</li>
<li>
<code><a href="../reference/gsub_response.html">gsub_response()</a></code> safely redacts responses with an empty body (<a href="https://github.com/nealrichardson/httptest2/issues/28" class="external-link">#28</a>)</li>
<li>Remove unused feature that would allow mocking with arbitrary local files via invalid URLs</li>
<li>httr2 compatibility: workarounds for issues in <code>httr2 &lt; 0.2</code> have been removed, and adaptations for <code>httr2 &gt;= 1.0</code> added</li>
<li>Tests and examples no longer use <code>httpbin.org</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.0" id="httptest2-010">httptest2 0.1.0<small>2022-01-10</small><a class="anchor" aria-label="anchor" href="#httptest2-010"></a></h2>
<p>Initial port of <code>httptest</code> to work on top of <code>httr2</code>. All APIs preserved except:</p>
<ul><li>Mock file hashes and error messages for requests with multipart forms or file uploads have changed. Aside from this, all mock files and file paths recorded by <code>httptest</code> using <code>httr</code> will work with <code>httptest2</code> and return valid <code>httr2_response</code> objects when loaded.</li>
<li>Redacting functions are applied to both the <code>httr2_response</code> and <code>httr2_request</code> objects, the latter in order to be able to alter the URL/mock file path being written. You do not need separate “redactors” and “requesters”.</li>
<li>
<code>expect_header()</code> has been renamed to <code><a href="../reference/expect_request_header.html">expect_request_header()</a></code> and takes headers to match by argument name rather than a single string “Header: value”. This allows more flexibility in matching headers, plus the ability to match multiple headers. It also no longer uses <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code> to extract the headers, so test failures are cleaner.</li>
<li>The failure message when an unexpected request is made is more clear and is distinguished from other “errors”. Expected mock file paths are more clearly shown when appropriate, and they are no longer included in the message itself that you would assert in <code><a href="../reference/expect_verb.html">expect_GET()</a></code>, <code><a href="../reference/expect_verb.html">expect_POST()</a></code>, et al.</li>
<li>All <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code> have been renamed to match the package name (e.g. <code>options(httptest2.verbose)</code>)</li>
<li>With <code>options(httptest2.verbose = TRUE)</code>, messages are printed in more places; messages about when a package redactor is called are now only printed if the option is set.</li>
</ul><p>Some functions were removed:</p>
<ul><li>
<code>redact_auth()</code>, which had previously been reduced to an alias for <code><a href="../reference/redact.html">redact_cookies()</a></code>
</li>
<li><code>with_fake_http()</code></li>
<li><code>public()</code></li>
<li>
<code>expect_json_equivalent()</code> (just use <code>testthat::expect_equal(list_as_map = TRUE)</code>)</li>
<li>
<code>skip_if_disconnected()</code> (just use <code><a href="https://testthat.r-lib.org/reference/skip.html" class="external-link">testthat::skip_if_offline()</a></code>)</li>
<li>
<code>fake_response()</code> (just use <code><a href="https://httr2.r-lib.org/reference/response.html" class="external-link">httr2::response()</a></code>)</li>
<li>
<code>gsub_request()</code> and <code>set_requester()</code> (no longer necessary)</li>
</ul><p>Changes to function signatures:</p>
<ul><li>The <code>path</code> argument to <code><a href="../reference/capture_requests.html">capture_requests()</a></code> and <code><a href="../reference/capture_requests.html">start_capturing()</a></code> has been removed; instead set the mock path explicitly with <code><a href="../reference/mockPaths.html">.mockPaths()</a></code> or use <code><a href="../reference/with_mock_dir.html">with_mock_dir()</a></code>.</li>
<li>Internal function <code><a href="../reference/save_response.html">save_response()</a></code> requires a <code>file</code> path argument because <code>httr2_response</code> objects do not contain their <code>request</code>, which is needed to construct the mock file path</li>
<li>Internal function <code><a href="../reference/build_mock_url.html">build_mock_url()</a></code> no longer accepts a string URL as an input; it only accepts <code>request</code> objects</li>
</ul></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Neal Richardson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

